<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>17.2. Server Configuration</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><link rel="home" href="index.html" title="The Neo4j Manual v1.9.M04" /><link rel="up" href="server.html" title="Chapter 17. Neo4j Server" /><link rel="prev" href="server-installation.html" title="17.1. Server Installation" /><link rel="next" href="server-debugging.html" title="17.3. Setup for remote debugging" /><link rel="preface" href="preface.html" title="Preface" /><link rel="part" href="introduction.html" title="Part I. Introduction" /><link rel="chapter" href="introduction-highlights.html" title="Chapter 1. Neo4j Highlights" /><link rel="chapter" href="graphdb-concepts.html" title="Chapter 2. Graph Database Concepts" /><link rel="chapter" href="graphdb-neo4j.html" title="Chapter 3. The Neo4j Graph Database" /><link rel="part" href="tutorials.html" title="Part II. Tutorials" /><link rel="chapter" href="tutorials-java-embedded.html" title="Chapter 4. Using Neo4j embedded in Java applications" /><link rel="chapter" href="tutorials-rest.html" title="Chapter 5. Neo4j Remote Client Libraries" /><link rel="chapter" href="tutorial-traversal.html" title="Chapter 6. The Traversal Framework" /><link rel="chapter" href="data-modeling-examples.html" title="Chapter 7. Data Modeling Examples" /><link rel="chapter" href="languages.html" title="Chapter 8. Languages" /><link rel="chapter" href="tutorials-python-embedded.html" title="Chapter 9. Using Neo4j embedded in Python applications" /><link rel="chapter" href="server-extending.html" title="Chapter 10. Extending the Neo4j Server" /><link rel="part" href="reference-documentation.html" title="Part III. Reference" /><link rel="chapter" href="capabilities.html" title="Chapter 11. Capabilities" /><link rel="chapter" href="transactions.html" title="Chapter 12. Transaction Management" /><link rel="chapter" href="import.html" title="Chapter 13. Data Import" /><link rel="chapter" href="indexing.html" title="Chapter 14. Indexing" /><link rel="chapter" href="cypher-query-lang.html" title="Chapter 15. Cypher Query Language" /><link rel="chapter" href="graph-algo.html" title="Chapter 16. Graph Algorithms" /><link rel="chapter" href="server.html" title="Chapter 17. Neo4j Server" /><link rel="chapter" href="rest-api.html" title="Chapter 18. REST API" /><link rel="chapter" href="python-embedded.html" title="Chapter 19. Python embedded bindings" /><link rel="part" href="operations.html" title="Part IV. Operations" /><link rel="chapter" href="deployment.html" title="Chapter 20. Installation &amp; Deployment" /><link rel="chapter" href="embedded-configuration.html" title="Chapter 21. Configuration &amp; Performance" /><link rel="chapter" href="ha.html" title="Chapter 22. High Availability" /><link rel="chapter" href="operations-backup.html" title="Chapter 23. Backup" /><link rel="chapter" href="operations-security.html" title="Chapter 24. Security" /><link rel="chapter" href="operations-monitoring.html" title="Chapter 25. Monitoring" /><link rel="part" href="tools.html" title="Part V. Tools" /><link rel="chapter" href="tools-webadmin.html" title="Chapter 26. Web Administration" /><link rel="chapter" href="shell.html" title="Chapter 27. Neo4j Shell" /><link rel="part" href="community.html" title="Part VI. Community" /><link rel="chapter" href="community-support.html" title="Chapter 28. Community Support" /><link rel="chapter" href="community-contributing.html" title="Chapter 29. Contributing to Neo4j" /><link rel="appendix" href="manpages.html" title="Appendix A. Manpages" /><link rel="refentry" href="re01.html" title="neo4j" /><link rel="refentry" href="re02.html" title="neo4j-shell" /><link rel="refentry" href="re03.html" title="neo4j-backup" /><link rel="appendix" href="questions.html" title="Appendix B. Questions &amp; Answers" /><link rel="subsection" href="server-configuration.html#_important_server_configurations_parameters" title="17.2.1. Important server configurations parameters" /><link rel="subsection" href="server-configuration.html#_neo4j_database_performance_configuration" title="17.2.2. Neo4j Database performance configuration" /><link rel="subsection" href="server-configuration.html#_server_logging_configuration" title="17.2.3. Server logging configuration" /><link rel="subsection" href="server-configuration.html#_http_logging_configuration" title="17.2.4. HTTP logging configuration" /><link rel="subsection" href="server-configuration.html#_other_configuration_options" title="17.2.5. Other configuration options" /><link rel="copyright" href="ln-idp3423008.html" title="License: Creative Commons 3.0" />


<!-- favicon -->

<link rel="shortcut icon" href="http://neo4j.org/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="icon" href="http://neo4j.org/favicon.ico" type="image/x-icon" />

<!-- style -->

<link href="css/shCore.css" rel="stylesheet" type="text/css" />
<link href="css/shCoreEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/shThemeEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/neo.css" rel="stylesheet" type="text/css" />

<!-- Syntax Highlighter -->

<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushJava.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushBash.js"></script>
<script type="text/javascript" src="js/shBrushPlain.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>
<script type="text/javascript" src="js/shBrushGroovy.js"></script>
<script type="text/javascript" src="js/shBrushCypher.js"></script>
<script type="text/javascript" src="js/shBrushScala.js"></script>
<script type="text/javascript" src="js/shBrushSql.js"></script>
<script type="text/javascript" src="js/shBrushPython.js"></script>
<script type="text/javascript" src="js/shBrushProperties.js"></script>

<!-- activate when needed
<script type="text/javascript" src="js/shBrushRuby.js"></script>
<script type="text/javascript" src="js/shBrushCSharp.js"></script>
-->
 
<script type="text/javascript">
  SyntaxHighlighter.defaults['tab-size'] = 4;
  SyntaxHighlighter.defaults['gutter'] = false;
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all()
</script>

<!-- JQuery -->

<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>

<!-- Replace SVG for browsers that lack support. -->
<script type="text/javascript" src="js/svgreplacer.js"></script>

<!-- Image Scaler -->

<script type="text/javascript" src="js/imagescaler.js"></script>

<!-- Table Styler -->

<script type="text/javascript" src="js/tablestyler.js"></script>

<!-- Version -->

<script type="text/javascript" src="js/version.js"></script>

<!-- Offline Sidebar -->

<script type="text/javascript" src="js/sidebar.js"></script>


<div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">The Neo4j Manual</a></span> &gt; <span class="breadcrumb-link"><a href="reference-documentation.html">Reference</a></span> &gt; <span class="breadcrumb-link"><a href="server.html">Neo4j Server</a></span> &gt; <span class="breadcrumb-node">Server Configuration</span></div></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="server-installation.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="server-debugging.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="server-configuration"></a>17.2. Server Configuration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="server-configuration.html#_important_server_configurations_parameters">17.2.1. Important server configurations parameters</a></span></dt><dt><span class="section"><a href="server-configuration.html#_neo4j_database_performance_configuration">17.2.2. Neo4j Database performance configuration</a></span></dt><dt><span class="section"><a href="server-configuration.html#_server_logging_configuration">17.2.3. Server logging configuration</a></span></dt><dt><span class="section"><a href="server-configuration.html#_http_logging_configuration">17.2.4. HTTP logging configuration</a></span></dt><dt><span class="section"><a href="server-configuration.html#_other_configuration_options">17.2.5. Other configuration options</a></span></dt></dl></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Quick info</strong></p></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The server’s primary configuration file is found under <span class="emphasis"><em>conf/neo4j-server.properties</em></span>
</li><li class="listitem">
The <span class="emphasis"><em>conf/log4j.properties</em></span> file contains the default server logging configuration
</li><li class="listitem">
Low-level performance tuning parameters are found in <span class="emphasis"><em>conf/neo4j.properties</em></span>
</li><li class="listitem">
Configuraion of the deamonizing wrapper are found in <span class="emphasis"><em>conf/neo4j-wrapper.properties</em></span>
</li><li class="listitem">
HTTP logging configuration is found in <span class="emphasis"><em>conf/neo4j-http-logging.xml</em></span>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_important_server_configurations_parameters"></a>17.2.1. Important server configurations parameters</h3></div></div></div><p>The main configuration file for the server can be found at <span class="emphasis"><em>conf/neo4j-server.properties</em></span>.
This file contains several important settings, and although the defaults are sensible
administrators might choose to make changes (especially to the port settings).</p><p>Set the location on disk of the database directory like this:</p><pre class="programlisting brush: plain">org.neo4j.server.database.location=data/graph.db</pre><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/admon/note.png" /></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>On Windows systems, absolute locations including drive letters need to read <span class="emphasis"><em>"c:/data/db"</em></span>.</p></td></tr></table></div><p>Specify the HTTP server port supporting data, administrative, and UI access:</p><pre class="programlisting brush: plain">org.neo4j.server.webserver.port=7474</pre><p>Specify the client accept pattern for the webserver (default is <code class="literal">127.0.0.1</code>, localhost only):</p><pre class="programlisting brush: plain">#allow any client to connect
org.neo4j.server.webserver.address=0.0.0.0</pre><p>For securing the Neo4j Server, see also <a class="xref" href="security-server.html" title="24.1. Securing access to the Neo4j Server">Section 24.1, “Securing access to the Neo4j Server”</a></p><p>Set the location of the round-robin database directory which gathers metrics on the running server instance:</p><pre class="programlisting brush: plain">org.neo4j.server.webadmin.rrdb.location=data/graph.db/../rrd</pre><p>Set the URI path for the REST data API through which the database is accessed. This should be a relative path.</p><pre class="programlisting brush: plain">org.neo4j.server.webadmin.data.uri=/db/data/</pre><p>Setting the management URI for the administration API that the Webadmin tool uses. This should be a relative path.</p><pre class="programlisting brush: plain">org.neo4j.server.webadmin.management.uri=/db/manage</pre><p>Force the server to use IPv4 network addresses, in <span class="emphasis"><em>conf/neo4j-wrapper.conf</em></span> under the section <span class="emphasis"><em>Java Additional Parameters</em></span> add a new paramter:</p><pre class="programlisting brush: plain">wrapper.java.additional.3=-Djava.net.preferIPv4Stack=true</pre><p>Low-level performance tuning parameters can be explicitly set by referring
to the following property:</p><pre class="programlisting brush: plain">org.neo4j.server.db.tuning.properties=neo4j.properties</pre><p>If this property isn’t set, the server will look for a file called <span class="emphasis"><em>neo4j.properties</em></span> in
the same directory as the <span class="emphasis"><em>neo4j-server.properties</em></span> file.</p><p>If this property isn’t set, and there is no <span class="emphasis"><em>neo4j.properties</em></span> file in the default
configuration directory, then the server will log a warning. Subsequently at runtime the
database engine will attempt tune itself based on the prevailing conditions.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_neo4j_database_performance_configuration"></a>17.2.2. Neo4j Database performance configuration</h3></div></div></div><p>The fine-tuning of the low-level Neo4j graph database engine is specified in a separate
properties file, <span class="emphasis"><em>conf/neo4j.properties</em></span>.</p><p>The graph database engine has a range of performance tuning options which are enumerated in
<a class="xref" href="server-performance.html" title="17.5. Server Performance Tuning">Section 17.5, “Server Performance Tuning”</a>. Note that other factors than Neo4j tuning should be considered
when performance tuning a server, including general server load, memory and file contention,
and even garbage collection penalties on the JVM, though such considerations are beyond the scope
of this configuration document.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_server_logging_configuration"></a>17.2.3. Server logging configuration</h3></div></div></div><p>Application events within Neo4j server are processed with
 <code class="literal"><a class="ulink" href="http://download.oracle.com/javase/6/docs/technotes/guides/logging/overview.html" target="_top">java.util.logging</a></code> and
 configured in the file <span class="emphasis"><em>conf/logging.properties</em></span>.</p><p>By default it is setup to print <code class="literal">INFO</code> level messages both on screen and in a rolling file in <span class="emphasis"><em>data/log</em></span>.
Most deployments will choose to use their own configuration here to meet local standards.
During development, much useful information can be found in the logs so some form of logging to disk is well worth keeping.
On the other hand, if you want to completely silence the console output, set:</p><pre class="programlisting brush: plain">java.util.logging.ConsoleHandler.level=OFF</pre><p>By default log files are rotated at approximately 10Mb and named consecutively neo4j.&lt;id&gt;.&lt;rotation sequence #&gt;.log
To change the naming scheme, rotation frequency and backlog size modify</p><pre class="programlisting brush: plain">java.util.logging.FileHandler.pattern
java.util.logging.FileHandler.limit
java.util.logging.FileHandler.count</pre><p>respectively to your needs. Details are available at the Javadoc for <code class="literal"><a class="ulink" href="http://download.oracle.com/javase/6/docs/api/java/util/logging/FileHandler.html" target="_top">java.util.logging.FileHandler</a></code>.</p><p>Apart from log statements originating from the Neo4j server, other libraries report their messages
through various frameworks.</p><p>Zookeeper is hardwired to use the log4j logging framework. The bundled <span class="emphasis"><em>conf/log4j.properties</em></span> applies for this use only and uses a rolling appender and outputs logs by default to the
<span class="emphasis"><em>data/log</em></span> directory.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_http_logging_configuration"></a>17.2.4. HTTP logging configuration</h3></div></div></div><p>As well as logging events happening within the Neo4j server, it is possible to log the HTTP requests and responses
that the server consumes and produces. Configuring HTTP logging requires operators to enable and configure the
logger and where it will log; and then to optionally configure the log format.</p><div class="warning" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/icons/admon/warning.png" /></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>By default the HTTP logger uses <code class="literal"><a class="ulink" href="http://en.wikipedia.org/wiki/Common_Log_Format" target="_top">Common Log Format</a></code>
meaning that most Web server tooling can automtically consume such logs. In general users should only enable HTTP logging,
select an output directory, and if necessary alter the rollover and retention policies.</p></td></tr></table></div><p>To enable HTTP logging, edit the <span class="emphasis"><em>conf/neo4j-server.properties</em></span> file resemble the following:</p><pre class="programlisting brush: plain">org.neo4j.server.http.log.enabled=true
org.neo4j.server.http.log.config=conf/neo4j-http-logging.xml</pre><p><span class="emphasis"><em>org.neo4j.server.http.log.enabled=true</em></span> tells the server that HTTP logging is enabled. HTTP logging can be totally
disabled by setting this property to <span class="emphasis"><em>false</em></span>.
<span class="emphasis"><em>org.neo4j.server.http.log.config=conf/neo4j-http-logging.xml</em></span> specifies the logging format and rollover policy file
that governs how HTTP log output is presented and archived. The defaults provided with Neo4j server uses an hourly log
rotation and <code class="literal"><a class="ulink" href="http://en.wikipedia.org/wiki/Common_Log_Format" target="_top">Common Log Format</a></code>.</p><p>If logging is set up to use log files then the server will check that the log file directory exists and is writable. If
this check fails, then the server will not startup and wil report the failure another available channel like standard out.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_other_configuration_options"></a>17.2.5. Other configuration options</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_enabling_logging_from_the_garbage_collector"></a>Enabling logging from the garbage collector</h4></div></div></div><p>To get garbage collection logging output you have to pass the corresponding option to the server JVM
executable by setting in <span class="emphasis"><em>conf/neo4j-wrapper.conf</em></span> the value</p><pre class="programlisting brush: plain">wrapper.java.additional.3=-Xloggc:data/log/neo4j-gc.log</pre><p>This line is already present and needs uncommenting. Note also that logging is not directed to console ;
You will find the logging statements in <span class="emphasis"><em>data/log/ne4j-gc.log</em></span> or whatever directory you set at the option.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_disabling_console_types_in_webadmin"></a>Disabling console types in Webadmin</h4></div></div></div><p>You may, for security reasons, want to disable the the Neo4j Shell in Webadmin.
Shells allow arbitrary code execution, and so they could constitute a security risk if you do not trust all users of your Neo4j Server.</p><p>In the <span class="emphasis"><em>conf/neo4j-server.properties</em></span> file:</p><pre class="programlisting brush: plain"># To disable all shells:
org.neo4j.server.manage.console_engines=

# To enable only the Neo4j Shell:
org.neo4j.server.manage.console_engines=shell</pre></div></div></div><HR xmlns=""></HR><a xmlns="" href="ln-idp3423008.html"><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 2013 Neo Technology</p></a><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="server-installation.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="server.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="server-debugging.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>
